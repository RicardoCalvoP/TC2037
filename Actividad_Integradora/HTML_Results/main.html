<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="CSS/style.css">
  <title>main.html</title>
</head>
<body>
<pre>
<span class="comment"># Ricardo Calvo Perez</span>  
<span class="comment"># 05/2024</span>  
  
<span class="comment"># This code is for elixir</span>  
  
<span class="reserved_word">defmodule</span> <span class="module">Project</span> <span class="reserved_word">do</span>  
  <span class="comment"># -----------------------</span>  
  <span class="comment"># Main Function</span>  
  <span class="comment"># -----------------------</span>  
  
  <span class="reserved_word">def</span> <span class="function">convert_file</span><span class="container">(</span><span class="variable">input_file</span><span class="container">)</span> <span class="reserved_word">do</span>  
    <span class="comment"># Folder where html results will save</span>  
    <span class="variable">html_address</span> <span class="operator">=</span> <span class="string">"HTML_Results/"</span>  
    <span class="comment"># Create a new name based on the called file but changed extensions from .ex to .html</span>  
    <span class="variable">html_file_name</span> <span class="operator">=</span> <span class="module">String</span><span class="operator">.</span><span class="function">replace</span><span class="container">(</span><span class="variable">input_file</span><span class="operator">,</span> <span class="regular_expression">~r/\.\w+$/</span><span class="operator">,</span> <span class="string">".html"</span><span class="container">)</span>  
    <span class="comment"># Adds hole address to the file</span>  
    <span class="variable">html_file</span> <span class="operator">=</span> <span class="variable">html_address</span> <span class="operator"><></span> <span class="variable">html_file_name</span>  
    <span class="comment"># Create & Write top html file</span>  
    <span class="function">write_html_start</span><span class="container">(</span><span class="variable">html_file</span><span class="operator">,</span> <span class="variable">html_file_name</span><span class="container">)</span>  
  
    <span class="comment"># Folder where needs to be the elixir to read file</span>  
    <span class="variable">input_file_folder</span> <span class="operator">=</span> <span class="string">"ToReadElxirFiles/"</span>  
    <span class="comment"># Concatenates hole address</span>  
    <span class="variable">file</span> <span class="operator">=</span> <span class="variable">input_file_folder</span> <span class="operator"><></span> <span class="variable">input_file</span>  
  
    <span class="function">read_file</span><span class="container">(</span><span class="variable">file</span><span class="operator">,</span> <span class="variable">html_file</span><span class="container">)</span>  
  
    <span class="comment"># Write closure tags and close file</span>  
    <span class="function">write_html_end</span><span class="container">(</span><span class="variable">html_file</span><span class="container">)</span>  
    <span class="comment"># File.close(html_file)</span>  
  <span class="reserved_word">end</span>  
  
  <span class="comment"># -----------------------</span>  
  <span class="comment"># File functions</span>  
  <span class="comment"># -----------------------</span>  
  
  <span class="comment"># Function yo call to read the calling file line by line</span>  
  <span class="reserved_word">def</span> <span class="function">read_file</span><span class="container">(</span><span class="variable">file</span><span class="operator">,</span> <span class="variable">html_file</span><span class="container">)</span> <span class="reserved_word">do</span>  
    <span class="variable">lines</span> <span class="operator">=</span> <span class="module">File</span><span class="operator">.</span><span class="function">stream!</span><span class="container">(</span><span class="variable">file</span><span class="container">)</span>  
  
    <span class="variable">token_list</span> <span class="operator">=</span> <span class="container">[</span>  
      <span class="container">{</span><span class="string">"reserved_word"</span><span class="operator">,</span>  
       <span class="regular_expression">~r/^(defmodule|defp|def|do|end|false|true|cond|case|when|if|else|nil)(?=\s)/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"function"</span><span class="operator">,</span> <span class="regular_expression">~r/^[a-z]\w*(\!+)?(?=\()/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"unused_variable"</span><span class="operator">,</span> <span class="regular_expression">~r/^\_[a-z]\w*(\d)*?(\:+)?/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"variable"</span><span class="operator">,</span> <span class="regular_expression">~r/^[a-z]\w*(\d)*?(\:+)?/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"comment"</span><span class="operator">,</span> <span class="regular_expression">~r/^\#.*/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"module"</span><span class="operator">,</span> <span class="regular_expression">~r/^[A-Z]\w*(\d)*?/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"attribute"</span><span class="operator">,</span> <span class="regular_expression">~r/^\@\w*/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"string", ~r/^\".*\"</span><span class="operator">/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"number"</span><span class="operator">,</span> <span class="regular_expression">~r/^\d+(\.\d+)?/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"operator"</span><span class="operator">,</span> <span class="regular_expression">~r/^(\+|\-|\*|\/|\=|==|===|!=|\.|\,|\||\|>|\->|\&|\<>|\<|\>)/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"atom"</span><span class="operator">,</span> <span class="regular_expression">~r/^\:\w+(\d)*?/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"container"</span><span class="operator">,</span> <span class="regular_expression">~r/^[\(\)\{\}\[\]]/</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"regular_expression"</span><span class="operator">,</span> <span class="regular_expression">~r/^\~r.+\//</span><span class="container">}</span><span class="operator">,</span>  
      <span class="container">{</span><span class="string">"space"</span><span class="operator">,</span> <span class="regular_expression">~r/^\s/</span><span class="container">}</span>  
    <span class="container">]</span>  
  
    <span class="module">Enum</span><span class="operator">.</span><span class="function">map</span><span class="container">(</span><span class="variable">lines</span><span class="operator">,</span> <span class="operator">&</span><span class="function">find_coincidences</span><span class="container">(</span><span class="variable">token_list</span><span class="operator">,</span> <span class="variable">token_list</span><span class="operator">,</span> <span class="container">[</span><span class="container">]</span><span class="operator">,</span> <span class="variable">html_file</span><span class="operator">,</span> <span class="operator">&</span><span class="number">1</span><span class="container">)</span><span class="container">)</span>  
  <span class="reserved_word">end</span>  
  
  <span class="comment"># Main function to put together  all of the html doc with results</span>  
  <span class="reserved_word">def</span> <span class="function">write_results</span><span class="container">(</span><span class="variable">html_file</span><span class="operator">,</span> <span class="variable">results</span><span class="container">)</span> <span class="reserved_word">do</span>  
    <span class="variable">results</span> <span class="operator">=</span> <span class="module">Enum</span><span class="operator">.</span><span class="function">reverse</span><span class="container">(</span><span class="variable">results</span><span class="container">)</span>  
  
    <span class="variable">formatted_results</span> <span class="operator">=</span>  
      <span class="module">Enum</span><span class="operator">.</span><span class="function">reduce</span><span class="container">(</span><span class="variable">results</span><span class="operator">,</span> <span class="string">""</span><span class="operator">,</span> <span class="reserved_word">fn</span> <span class="container">[</span><span class="variable">token</span><span class="operator">,</span> <span class="variable">value</span><span class="container">]</span><span class="operator">,</span> <span class="variable">acc</span> <span class="operator">-</span><span class="operator">></span>  
        <span class="reserved_word">if</span> <span class="variable">token</span> <span class="operator">=</span><span class="operator">=</span> <span class="string">"space"</span> <span class="reserved_word">do</span>  
          <span class="variable">acc</span> <span class="operator"><></span> <span class="string">" "</span>  
        <span class="reserved_word">else</span>  
          <span class="variable">acc</span> <span class="operator"><></span> <span class="string">"<span class=\"#{token}\">#{value}</span>"</span>  
        <span class="reserved_word">end</span>  
      <span class="variable">end</span><span class="container">)</span>  
  
    <span class="variable">results_string</span> <span class="operator">=</span> <span class="variable">formatted_results</span> <span class="operator"><></span> <span class="string">" \n"</span>  
  
    <span class="module">File</span><span class="operator">.</span><span class="function">write!</span><span class="container">(</span><span class="variable">html_file</span><span class="operator">,</span> <span class="variable">results_string</span><span class="operator">,</span> <span class="container">[</span><span class="atom">:append</span><span class="container">]</span><span class="container">)</span>  
  <span class="reserved_word">end</span>  
  
  <span class="comment"># Function to write the beginning of html structure</span>  
  <span class="reserved_word">def</span> <span class="function">write_html_start</span><span class="container">(</span><span class="variable">html_file</span><span class="operator">,</span> <span class="variable">name</span><span class="container">)</span> <span class="reserved_word">do</span>  
    <span class="module">File</span><span class="operator">.</span><span class="function">write!</span><span class="container">(</span><span class="variable">html_file</span><span class="operator">,</span> <span class="string">"""</span>  
